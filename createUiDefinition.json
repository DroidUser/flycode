{
  "handler": "Microsoft.Compute.MultiVm",
  "version": "0.0.1-preview",
  "parameters": {
    "basics": [
      {
        "name": "adminUsername",
        "type": "Microsoft.Compute.UserNameTextBox",
        "label": "Username",
        "toolTip": "Admin username for the virtual machines.",
        "osPlatform": "Windows"
      },
      {
        "name": "adminPassword",
        "type": "Microsoft.Compute.CredentialsCombo",
        "label": {
          "password": "Password",
          "confirmPassword": "Confirm password"
        },
        "toolTip": {
          "password": "Admin password for the virtual machines."
        },
        "osPlatform": "Windows"
      }
    ],
    "steps": [
      {
        "name": "storageConfig",
        "label": "Storage settings",
        "subLabel": {
          "preValidation": "Configure the storage settings",
          "postValidation": "Done"
        },
        "bladeTitle": "Storage settings",
        "elements": [
          {
            "name": "storageAccount",
            "type": "Microsoft.Storage.StorageAccountSelector",
            "label": "Storage account",
            "defaultValue": {
              "type": "Standard_LRS"
            },
            "constraints": {
              "allowedTypes": [
                "Standard_LRS"
              ],
              "required": true
            }
          }
        ]
      }
    ],
    "outputs": {
      "location": "[location()]",
      "adminUsername": "[basics('adminUsername')]",
      "adminPassword": "[basics('adminPassword')]",
      "storageAccountNewOrExisting": "[steps('storageConfig').storageAccount.newOrExisting]",
      "StorageAccountName": "[steps('storageConfig').storageAccount.name]",
      "storageAccountType": "[steps('storageConfig').storageAccount.type]",
      "existingStorageAccountRG": "[steps('storageConfig').storageAccount.resourceGroup]"
    }
  }
}
